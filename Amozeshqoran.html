
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>دوره جامع آموزش قرآن کریم | خط عثمان طه</title>
    
    <!-- فونت‌های گوگل و آیکون -->
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary-color: #0f5132; /* سبز قرآنی */
            --primary-light: #167a4a;
            --accent-color: #d4a017; /* طلایی */
            --bg-color: #f3f4f6;
            --text-color: #1f2937;
            --sidebar-width: 300px;
            --header-height: 60px;
            --footer-height: 70px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* جلوگیری از اسکرول کلی صفحه */
        }

        /* --- هدر و نوار پیشرفت --- */
        .app-header {
            height: var(--header-height);
            background: white;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 50;
            position: relative;
        }

        .header-title h1 {
            font-size: 1.1rem;
            color: var(--primary-color);
            font-weight: 800;
        }
        
        .header-title span {
            font-size: 0.75rem;
            color: #6b7280;
        }

        .progress-container {
            flex-grow: 1;
            margin: 0 20px;
            max-width: 300px;
            background: #e5e7eb;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            display: none; /* در موبایل مخفی، در دسکتاپ نمایش */
        }
        
        @media (min-width: 768px) {
            .progress-container { display: block; }
        }

        .progress-bar {
            height: 100%;
            background: var(--accent-color);
            width: 0%;
            transition: width 0.5s ease;
        }

        .menu-toggle {
            display: block;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-color);
            cursor: pointer;
        }

        @media (min-width: 992px) {
            .menu-toggle { display: none; }
        }

        /* --- لی اوت اصلی --- */
        .layout {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        /* --- سایدبار (لیست دروس) --- */
        .sidebar {
            width: var(--sidebar-width);
            background: white;
            border-left: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            position: absolute;
            top: 0;
            bottom: 0;
            right: 0;
            z-index: 40;
            transform: translateX(100%); /* در موبایل پیش‌فرض مخفی */
        }

        @media (min-width: 992px) {
            .sidebar {
                position: relative;
                transform: translateX(0);
            }
        }

        .sidebar.open {
            transform: translateX(0);
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
        }

        .sidebar-header {
            padding: 20px;
            background: var(--primary-color);
            color: white;
            text-align: center;
        }

        .lesson-list {
            flex: 1;
            overflow-y: auto;
            list-style: none;
            padding: 0;
        }

        .lesson-item {
            border-bottom: 1px solid #f3f4f6;
        }

        .lesson-btn {
            width: 100%;
            padding: 15px 20px;
            background: none;
            border: none;
            text-align: right;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: 0.2s;
            font-family: inherit;
            color: #4b5563;
        }

        .lesson-btn:hover {
            background-color: #f9fafb;
        }

        .lesson-btn.active {
            background-color: #f0fdf4;
            color: var(--primary-color);
            border-right: 4px solid var(--accent-color);
            font-weight: bold;
        }

        .lesson-btn.locked {
            color: #9ca3af;
            cursor: not-allowed;
            background-color: #f9fafb;
        }

        .status-icon {
            font-size: 0.9rem;
        }
        
        .fa-check-circle { color: var(--primary-color); }
        .fa-lock { color: #d1d5db; }
        .fa-lock-open { color: var(--accent-color); }

        /* --- محتوای اصلی (درس) --- */
        .main-content {
            flex: 1;
            background: var(--bg-color);
            overflow-y: auto;
            padding: 20px;
            padding-bottom: 100px; /* فضا برای فوتر */
            position: relative;
        }

        .course-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            min-height: 100%;
            padding: 30px;
            display: none; /* پیش فرض مخفی */
            animation: fadeIn 0.4s ease;
        }

        .course-container.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1.lesson-title {
            font-size: 1.5rem;
            color: var(--primary-color);
            border-bottom: 2px solid #eee;
            padding-bottom: 15px;
            margin-bottom: 25px;
        }

        p {
            line-height: 1.9;
            font-size: 1.05rem;
            margin-bottom: 20px;
            color: #374151;
        }

        /* استایل متن‌های قرآنی */
        .quran-text {
            font-family: 'Scheherazade New', serif;
            font-size: 2.2rem;
            color: #000;
            background-color: #fefce8;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin: 25px 0;
            border: 1px solid #eab308;
            line-height: 2.4;
            direction: rtl;
            box-shadow: inset 0 0 10px rgba(234, 179, 8, 0.1);
        }

        .highlight { color: #be185d; font-weight: bold; }

        /* گرید الفبا */
        .alphabet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(55px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }

        .letter-box {
            background: white;
            border: 1px solid #e5e7eb;
            padding: 10px;
            text-align: center;
            border-radius: 8px;
            font-family: 'Scheherazade New', serif;
            font-size: 1.6rem;
            transition: 0.3s;
            cursor: default;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .letter-box:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            border-color: var(--primary-color);
        }

        /* بخش‌خوانی */
        .syllable-box {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        
        .syllable {
            background: #f3f4f6;
            padding: 8px 15px;
            border-radius: 8px;
            font-family: 'Scheherazade New', serif;
            font-size: 1.6rem;
            border: 1px dashed #9ca3af;
        }

        /* --- فوتر کنترل (چسبان پایین) --- */
        .control-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: var(--footer-height);
            background: white;
            border-top: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 100;
            box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        @media (min-width: 992px) {
            .control-footer {
                right: var(--sidebar-width); /* وقتی سایدبار باز است */
            }
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-family: inherit;
            font-weight: 700;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: 0.2s;
            font-size: 0.95rem;
        }

        .btn-prev {
            background: #f3f4f6;
            color: #4b5563;
        }

        .btn-prev:hover { background: #e5e7eb; }

        .btn-next {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 4px 6px rgba(15, 81, 50, 0.2);
        }

        .btn-next:hover {
            background: var(--primary-light);
            transform: translateY(-1px);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* --- مودال تکلیف (Homework) --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.6);
            z-index: 200;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(3px);
            padding: 20px;
        }

        .modal-overlay.active { display: flex; }

        .modal-box {
            background: white;
            width: 100%;
            max-width: 450px;
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal-icon {
            width: 70px;
            height: 70px;
            background: #fef3c7;
            color: #d97706;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 15px;
        }

        .modal-title {
            font-size: 1.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .modal-desc {
            font-size: 0.95rem;
            color: #4b5563;
            margin-bottom: 20px;
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            border: 1px dashed #d1d5db;
        }

        .task-checkbox-container {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
        }

        .task-checkbox-container input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .btn-confirm {
            width: 100%;
            background: var(--primary-color);
            color: white;
            padding: 12px;
        }

        /* ریسپانسیو موبایل */
        @media (max-width: 768px) {
            .course-container { padding: 20px; border-radius: 0; box-shadow: none; min-height: auto;}
            .main-content { padding: 0; padding-bottom: 80px; }
            .header-title h1 { font-size: 1rem; }
            .quran-text { font-size: 1.8rem; padding: 15px; }
        }

        /* اورلی سایدبار موبایل */
        .sidebar-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 30;
            display: none;
        }
        .sidebar-overlay.active { display: block; }

    </style>
</head>
<body>

    <!-- هدر -->
    <header class="app-header">
        <div class="header-title">
            <h1>آموزش قرآن کریم</h1>
            <span>نسخه تعاملی | خط عثمان طه</span>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <button class="menu-toggle" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
        </button>
    </header>

    <div class="layout">
        <!-- پوشش تیره برای موبایل -->
        <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

        <!-- سایدبار -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>فهرست دروس</h2>
                <div style="font-size:0.8rem; opacity:0.8; margin-top:5px;">گام به گام پیش بروید</div>
            </div>
            <ul class="lesson-list" id="lessonList">
                <!-- لیست توسط جاوااسکریپت پر می‌شود -->
            </ul>
        </aside>

        <!-- محتوای اصلی -->
        <main class="main-content" id="mainContent">
            
            <div id="welcome-screen" class="course-container active" style="text-align: center; padding-top: 50px;">
                <i class="fas fa-quran fa-4x" style="color:var(--primary-color); margin-bottom:20px;"></i>
                <h1 style="margin-bottom: 10px;">بسم الله الرحمن الرحیم</h1>
                <p>به دوره جامع آموزش روخوانی قرآن خوش آمدید.</p>
                <p>در این دوره شما به صورت مرحله به مرحله با قواعد روخوانی آشنا خواهید شد. هر درس دارای تمرین و تکلیف مخصوص است که باید انجام دهید.</p>
                <button class="btn btn-next" style="width: fit-content; margin: 0 auto;" onclick="startCourse()">
                    شروع یادگیری <i class="fas fa-arrow-left"></i>
                </button>
            </div>

            <!-- محتوای درس‌ها (در ابتدا مخفی هستند و توسط JS نمایش داده می‌شوند) -->
            <!-- از data-task برای تعیین تکلیف هر درس استفاده می‌کنیم -->
            
            <div id="lesson1" class="course-container" data-task="لطفاً تمام حروف الفبا را یک بار با صدای بلند بخوانید و حروفی که در فارسی وجود ندارند را ۵ بار تکرار کنید.">
                <h1 class="lesson-title">درس اول: حروف الفبا</h1>
                <p>حروف عربی مانند حروف فارسی هستند اما ۴ حرف (پ، ژ، گ، چ) در زبان عربی وجود ندارد.</p>
                <div class="alphabet-grid">
                    <div class="letter-box">ء</div><div class="letter-box">ا</div><div class="letter-box">ب</div>
                    <div class="letter-box">ت</div><div class="letter-box">ث</div><div class="letter-box">ج</div>
                    <div class="letter-box">ح</div><div class="letter-box">خ</div><div class="letter-box">د</div>
                    <div class="letter-box">ذ</div><div class="letter-box">ر</div><div class="letter-box">ز</div>
                    <div class="letter-box">س</div><div class="letter-box">ش</div><div class="letter-box">ص</div>
                    <div class="letter-box">ض</div><div class="letter-box">ط</div><div class="letter-box">ظ</div>
                    <div class="letter-box">ع</div><div class="letter-box">غ</div><div class="letter-box">ف</div>
                    <div class="letter-box">ق</div><div class="letter-box">ک</div><div class="letter-box">ل</div>
                    <div class="letter-box">م</div><div class="letter-box">ن</div><div class="letter-box">و</div>
                    <div class="letter-box">ه</div><div class="letter-box">ی</div>
                </div>
            </div>

            <div id="lesson2" class="course-container" data-task="ده کلمه فارسی پیدا کنید که دارای این حرکات هستند و آن‌ها را با صدای بلند تلفظ کنید.">
                <h1 class="lesson-title">درس دوم: حرکات کوتاه</h1>
                <p>برای اینکه بتوانیم حروف را بخوانیم از علامات زیر استفاده می‌کنیم:</p>
                <div class="quran-text">
                    ــَـ (فتحه) &nbsp;&nbsp;&nbsp; ــِـ (کسره) &nbsp;&nbsp;&nbsp; ــُـ (ضمه)
                </div>
                <p>مثال:</p>
                <ul>
                    <li>ــَـ مثل فَ در فَرش</li>
                    <li>ــِـ مثل خِ در خِرس</li>
                    <li>ــُـ مثل تُ در تُرش</li>
                </ul>
            </div>

            <div id="lesson3" class="course-container" data-task="صدای حرکات عربی (کوتاه) را ۱۰ بار تمرین کنید تا تفاوت آن با فارسی ملکه ذهن شود.">
                <h1 class="lesson-title">درس سوم: تفاوت صداها</h1>
                <p>در زبان عربی صدای حرکات مقداری با فارسی فرق دارد:</p>
                <ul>
                    <li>ــَـ صدایی شبیه به <span class="highlight">آ</span> دارد (اما کوتاه)</li>
                    <li>ــِـ صدایی شبیه به <span class="highlight">ای</span> دارد (اما کوتاه)</li>
                    <li>ــُـ صدایی شبیه به <span class="highlight">او</span> دارد (اما کوتاه)</li>
                </ul>
            </div>

            <div id="lesson4" class="course-container" data-task="کلمات قرآنی زیر را ۵ بار با صوت زیبا و کشیده تکرار کنید.">
                <h1 class="lesson-title">درس چهارم: حرکات کشیده</h1>
                <p>اگر بعد از حرکات کوتاه، حروف مدی (الف، ی، و) بیایند، صدا کشیده می‌شود.</p>
                
                <h3>۱. فتحه کشیده (ــَـ + ا):</h3>
                <div class="quran-text">
                    قَالَ - كَانَ - جَاءَ - مَالِكِ - النَّاسُ - إِيَّاكَ
                </div>

                <h3>۲. کسره کشیده (ــِـ + ي):</h3>
                <div class="quran-text">
                    فِيهِ - الَّذِي - الرَّحِيمِ - دِينِ - قِيلَ
                </div>

                <h3>۳. ضمه کشیده (ــُـ + و):</h3>
                <div class="quran-text">
                    يَقُولُ - كَانُوا - ءَامَنُوا - قُلُوبُهُم - يَعْلَمُونَ
                </div>
            </div>

            <div id="lesson5" class="course-container" data-task="از روی قرآن صفحه ۱۰ را باز کنید و ۵ کلمه ساکن دار پیدا کنید و بخوانید.">
                <h1 class="lesson-title">درس پنجم: سکون</h1>
                <p>به حرفی که هیچ حرکتی ندارد ساکن میگویند. حرف ساکن با علامت ( ۡ ) نشان داده می‌شود و به کمک حرف متحرک قبل از خود خوانده میشود.</p>
                <div class="quran-text">
                    قَدْ - لَمْ - الْحَمْدُ - أَنْعَمْتَ - مُلۡکُ
                </div>
            </div>

            <div id="lesson6" class="course-container" data-task="تفاوت صدای نون ساکن و تنوین را با تلفظ مثال‌های زیر تمرین کنید.">
                <h1 class="lesson-title">درس ششم: تنوین</h1>
                <p>تنوین، نون ساکنی است که نوشته نمی‌شود اما خوانده می‌شود.</p>
                
                <h3>تنوین فتحه (ــًـ):</h3>
                <div class="quran-text">كِتَابًا - رَسُولًا - عَلِيمًا - هُدًى</div>

                <h3>تنوین کسره (ـــٍـ):</h3>
                <div class="quran-text">كِتَابٍ - رَسُولٍ - يَوْمٍ - عَذَابٍ</div>

                <h3>تنوین ضمه (ــٌـ):</h3>
                <div class="quran-text">كِتَابٌ - رَسُولٌ - عَذَابٌ - عَلِيمٌ</div>
            </div>

            <div id="lesson7" class="course-container" data-task="کلمات مشدد زیر را با تاکید و مکث روی حرف تشدید دار بخوانید.">
                <h1 class="lesson-title">درس هفتم: تشدید</h1>
                <p>علامت ( ّ ) نشان‌دهنده تکرار حرف است. حرف اول ساکن و دومی متحرک است.</p>
                <div class="quran-text">
                    رَبِّ - الْحَقُّ - الشَّمْسُ - النَّاسُ - إِنَّ - ثُمَّ
                </div>
            </div>

            <div id="lesson8" class="course-container" data-task="به سوره قریش مراجعه کنید و کلماتی که همزه روی پایه دارند را بیابید.">
                <h1 class="lesson-title">درس هشتم: پایه همزه</h1>
                <p>اگر همزه ( ء ) زیر یا روی حرفی باشد، آن حرف را نمی‌خوانیم و فقط همزه را میخوانیم.</p>
                <div class="quran-text">
                    يُؤْمِنُونَ - سَأَلَ - قُرِئَ - جِئْتَ - بِئْسَ
                </div>
            </div>

            <div id="lesson9" class="course-container" data-task="پنج بار کلمات مثال زده شده را بخوانید و دقت کنید حرف زیر الف کوتاه خوانده نشود.">
                <h1 class="lesson-title">درس نهم: الف کوتاه</h1>
                <p>اگر الف کوتاه ( ٰ ) روی حرفی بود، آن حرف را نمی‌خوانیم و فقط الف را میخوانیم.</p>
                <div class="quran-text">
                    إِذۡ قَالَ مُوسَىٰ - الزَّكَوٰةِ - عِيسَىٰ - صَلَوٰةِ
                </div>
            </div>

            <div id="lesson10" class="course-container" data-task="در انتهای افعال جمع در قرآن (مثل قالوا) الف ناخوانا را پیدا کنید.">
                <h1 class="lesson-title">درس دهم: حروف ناخوانا (۱)</h1>
                <p>اگر علامت ( ْ ) دایره توخالی روی حرفی واقع شود، آن حرف خوانده نمی‌شود.</p>
                <div class="quran-text">
                    ءَامَنُواْ - كَفَرُواْ - وَقُومُواْ - حَافِظُواْ
                </div>
            </div>

            <div id="lesson11" class="course-container" data-task="کلمه انا را در سوره کافرون پیدا کنید و صحیح بخوانید.">
                <h1 class="lesson-title">درس یازدهم: الف مدی (انا)</h1>
                <p>اگر علامت ( 0 ) بیضی شکل روی الف باشد (معمولا در کلمه اَنَا)، هنگام وصل خوانده نمی‌شود.</p>
                <div class="quran-text">
                    قَالَ أَنَا۠ خَيْرٌ مِنْهُ - لَٰكِنَّـا۠
                </div>
            </div>

            <div id="lesson12" class="course-container" data-task="ده بار بسم الله الرحمن الرحیم را بخوانید و به حذف شدن همزه وصل دقت کنید.">
                <h1 class="lesson-title">درس دوازدهم: همزه وصل (ٱ)</h1>
                <p>اگر الف به صورت ( ٱ ) نوشته شود، در میان کلام خوانده نمی‌شود (ساقط می‌شود).</p>
                <div class="quran-text">
                    وَٱلۡقَمَرِ - يَوْمِ ٱلدِّينِ - هُوَ ٱللَّهُ - بِسْمِ ٱللَّهِ
                </div>
            </div>

            <div id="lesson13" class="course-container" data-task="قواعد شروع با همزه وصل را حفظ کنید و ۳ مثال برای هر کدام بزنید.">
                <h1 class="lesson-title">درس سیزدهم: شروع با همزه وصل</h1>
                <p>هنگام شروع از ( ٱ ) باید به الف حرکت دهیم:</p>
                <ol>
                    <li>اگر کلمه "ال" دارد: <strong>فتحه</strong> (ٱلْحَمْدُ -> اَلْحَمْدُ)</li>
                    <li>در فعل‌ها، اگر حرف سوم ضمه داشت: <strong>ضمه</strong> (ٱدْعُ -> اُدْعُ)</li>
                    <li>در سایر موارد: <strong>کسره</strong> (ٱهْدِنَا -> اِهْدِنَا، اِبْن، اِسْم)</li>
                </ol>
            </div>

            <div id="lesson14" class="course-container" data-task="یک صفحه از قرآن را باز کنید و تمام نون‌های بدون علامت را پیدا کنید.">
                <h1 class="lesson-title">درس چهاردهم: حروف بدون علامت</h1>
                <p>اگر حرفی در قرآن بدون هیچ علامتی بود، معمولاً خوانده نمی‌شود (ادغام) یا تغییر در تلفظ دارد.</p>
                
                <h3>۱. حرف بعدی تشدید دارد:</h3>
                <p>حرف بدون علامت خوانده نمی‌شود.</p>
                <div class="quran-text">قُل رَّبِّ (قُرَّبِّ) - قَد تَّعْلَمُونَ</div>

                <h3>۲. حرف نون (ن) بدون علامت:</h3>
                <p>اگر بعدش (ی، ر، م، ل، و، ن) باشد: ادغام می‌شود (ن خوانده نمی‌شود).</p>
                <div class="quran-text">مِن رَّبِّهِمْ - مَن يَقُولُ</div>
                <p>اگر بالای نون "م" کوچک باشد: تبدیل به میم می‌شود (اقلاب).</p>
                <div class="quran-text">مِنۢ بَعْدِ - يَنۢبَغِي</div>
            </div>

            <div id="lesson15" class="course-container" data-task="سوره نبأ را بخوانید و به الف‌های بعد از تنوین در پایان آیات دقت کنید.">
                <h1 class="lesson-title">درس پانزدهم: الفِ بعد از تنوین</h1>
                <p>الفی که بعد از تنوین ــًـ می‌آید، در حالت وصل خوانده نمی‌شود. در وقف تبدیل به الف مدی می‌شود.</p>
                <div class="quran-text">
                    نَعِيمًا - شَرَابًا طَهُورًا - مُسۡتَقَرًّا
                </div>
            </div>

            <div id="lesson16" class="course-container" data-task="کلمات هدی و ضحی را ۵ بار تکرار کنید.">
                <h1 class="lesson-title">درس شانزدهم: یاء ناخوانا</h1>
                <p>یائی (ی) که در آخر کلمه پس از تنوین واقع می‌شود خوانده نمی‌شود.</p>
                <div class="quran-text">
                    هُدًى - فَتًى - ضُحًى - عَمًى
                </div>
            </div>

            <div id="lesson17" class="course-container" data-task="در سوره بقره صفحه اول بگردید و حروف کوچک را پیدا کنید.">
                <h1 class="lesson-title">درس هفدهم: حروف کوچک</h1>
                <p>حروف کوچکی که در کلمات می‌بینید باید تلفظ شوند.</p>
                <div class="quran-text">
                    نُـــۨجِي - لَهُۥ - أَمۡرِهِۦ - هَـٰذَا
                </div>
            </div>

            <div id="lesson18" class="course-container" data-task="کلمه ولا الضالین را با کشش کامل (۶ حرکت انگشت) تمرین کنید.">
                <h1 class="lesson-title">درس هجدهم: مد ( ٓ )</h1>
                <p>علامت مد یعنی کشش صدا بیش از حد طبیعی.</p>
                <ul>
                    <li>اگر بعدش همزه (ء) باشد: ۴ شماره کشش (سُوٓءَ)</li>
                    <li>اگر بعدش سکون یا تشدید باشد: ۶ شماره کشش (ضَّآلِّينَ)</li>
                </ul>
            </div>

            <div id="lesson19" class="course-container" data-task="ده کلمه را انتخاب کنید و روش وقف بر آنها را تمرین کنید.">
                <h1 class="lesson-title">درس نوزدهم: وقف</h1>
                <p>هنگام توقف بر آخر کلمات:</p>
                <ul>
                    <li>اگر آخر کلمه (ة) باشد -> تبدیل به (ه) ساکن می‌شود. (صَلَوٰةِ -> صَلَوٰه)</li>
                    <li>اگر تنوین (ً) باشد -> تبدیل به الف می‌شود. (حِسَابًا -> حِسَابَا)</li>
                    <li>سایر حرکات -> ساکن می‌شوند. (رَحِيمٌ -> رَحِيمْ)</li>
                </ul>
            </div>

            <div id="lesson20" class="course-container" data-task="۵ سوره که با حروف مقطعه شروع می‌شوند را نام ببرید و ابتدای آنها را بخوانید.">
                <h1 class="lesson-title">درس بیستم: حروف مقطعه</h1>
                <p>حروفی که در اول سوره‌ها می‌آیند و باید با نامشان خوانده شوند.</p>
                <div class="quran-text">
                    الٓـمٓ (الف لام میم) - يسٓ (یا سین) - قٓ (قاف)
                </div>
            </div>

            <div id="lesson21" class="course-container" data-task="سوره اخلاص را با وصل کردن آیه اول به دوم بخوانید (احدن الله الصمد).">
                <h1 class="lesson-title">درس بیست و یکم: التقاء ساکنین</h1>
                <p>اگر تنوین به حرف ساکن یا مشدد برسد، نونِ تنوین تبدیل به نون مکسور (نِ) می‌شود.</p>
                <div class="quran-text">
                    قُلْ هُوَ اللَّهُ أَحَدٌ ٱللَّهُ الصَّمَدُ <br>
                    خوانده می‌شود: أَحَدُنِ ٱللَّهُ الصَّمَدُ
                </div>
            </div>

            <div id="syllables" class="course-container" data-task="سه کلمه سخت زیر را ۵ بار به صورت بخش‌بخش بخوانید تا روان شوید.">
                <h1 class="lesson-title">درس آخر: بخش خوانی (مهم)</h1>
                <p>برای خواندن کلمات سخت، آن‌ها را بخش‌بخش کنید. هر بخش با یک حرف متحرک شروع می‌شود.</p>
                
                <h3>مثال‌ها:</h3>
                
                <div class="quran-text">يَعْلَمُونَ</div>
                <div class="syllable-box">
                    <span class="syllable">یَعْ</span>
                    <span class="syllable">لَ</span>
                    <span class="syllable">مُو</span>
                    <span class="syllable">نَ</span>
                </div>

                <div class="quran-text">ٱلْمُسْتَقِيمَ</div>
                <div class="syllable-box">
                    <span class="syllable">أَلْ</span>
                    <span class="syllable">مُسْ</span>
                    <span class="syllable">تَ</span>
                    <span class="syllable">قِي</span>
                    <span class="syllable">مَ</span>
                </div>

                <div class="quran-text">فَسَيَكْفِيكَهُمُ</div>
                <div class="syllable-box">
                    <span class="syllable">فَ</span>
                    <span class="syllable">سَ</span>
                    <span class="syllable">يَكْ</span>
                    <span class="syllable">فِي</span>
                    <span class="syllable">كَ</span>
                    <span class="syllable">هُ</span>
                    <span class="syllable">مُ</span>
                </div>
            </div>

            <div id="tajweed" class="course-container" data-task="تبریک! دوره مقدماتی تمام شد. اکنون یک صفحه کامل از قرآن را با رعایت تمام قواعد بخوانید.">
                <h1 class="lesson-title">خلاصه تجوید</h1>
                
                <h3>احکام نون ساکن:</h3>
                <ul>
                    <li><strong>اظهار:</strong> نون کاملاً واضح خوانده می‌شود (نزد حروف حلقی: ء ه ع ح غ خ).</li>
                    <li><strong>ادغام:</strong> نون حذف و در حرف بعد ادغام می‌شود (یرملون).</li>
                    <li><strong>اقلاب:</strong> نون به میم تبدیل می‌شود (نزد حرف ب).</li>
                    <li><strong>اخفاء:</strong> نون با حالت تودماغی ادا می‌شود (سایر حروف).</li>
                </ul>

                <h3>قلقله:</h3>
                <p>رها کردن صدای حرف ساکن. حروف قلقله: (ق ط ب ج د).</p>
                
                <h3>حروف استعلاء (درشت):</h3>
                <p>ص ض ط ظ خ غ ق (باید دهان را پر کرد و درشت تلفظ کرد).</p>
                
                <div style="margin-top: 40px; text-align: center; padding: 20px; background: #ecfccb; border-radius: 10px;">
                    <i class="fas fa-certificate fa-3x" style="color: var(--primary-color); margin-bottom: 15px;"></i>
                    <h3>پایان دوره مقدماتی</h3>
                    <p>ان‌شاءالله با تمرین مداوم تسلط کامل پیدا کنید.</p>
                </div>
            </div>

        </main>

        <!-- فوتر کنترل -->
        <footer class="control-footer">
            <button class="btn btn-prev" id="btnPrev" onclick="prevLesson()" disabled>
                <i class="fas fa-chevron-right"></i> قبلی
            </button>
            <div style="font-size: 0.9rem; font-weight: bold; color: var(--text-color);">
                درس <span id="currentStepNum">0</span> از <span id="totalSteps">23</span>
            </div>
            <button class="btn btn-next" id="btnNext" onclick="attemptComplete()">
                تکمیل و ادامه <i class="fas fa-check"></i>
            </button>
        </footer>
    </div>

    <!-- مودال تکلیف -->
    <div class="modal-overlay" id="taskModal">
        <div class="modal-box">
            <div class="modal-icon">
                <i class="fas fa-clipboard-list"></i>
            </div>
            <div class="modal-title">تکلیف این بخش</div>
            <div class="modal-desc" id="taskText">
                متن تکلیف اینجا قرار می‌گیرد...
            </div>
            <label class="task-checkbox-container">
                <input type="checkbox" id="taskCheck">
                <span>تکلیف را انجام دادم و یاد گرفتم.</span>
            </label>
            <button class="btn btn-confirm" id="btnConfirmTask" onclick="confirmTask()" disabled style="opacity: 0.5; cursor: not-allowed;">
                ثبت و رفتن به مرحله بعد
            </button>
        </div>
    </div>

    <script>
        // تعریف داده‌های درس‌ها بر اساس ID های موجود در HTML
        const lessons = [
            'lesson1', 'lesson2', 'lesson3', 'lesson4', 'lesson5', 
            'lesson6', 'lesson7', 'lesson8', 'lesson9', 'lesson10',
            'lesson11', 'lesson12', 'lesson13', 'lesson14', 'lesson15',
            'lesson16', 'lesson17', 'lesson18', 'lesson19', 'lesson20',
            'lesson21', 'syllables', 'tajweed'
        ];

        // عناوین فارسی برای نمایش در سایدبار
        const lessonTitles = {
            'lesson1': 'حروف الفبا',
            'lesson2': 'حرکات کوتاه',
            'lesson3': 'تفاوت صداها',
            'lesson4': 'حرکات کشیده',
            'lesson5': 'سکون',
            'lesson6': 'تنوین',
            'lesson7': 'تشدید',
            'lesson8': 'پایه همزه',
            'lesson9': 'الف کوتاه',
            'lesson10': 'حروف ناخوانا (۱)',
            'lesson11': 'الف مدی (انا)',
            'lesson12': 'همزه وصل',
            'lesson13': 'شروع با همزه وصل',
            'lesson14': 'حروف بدون علامت',
            'lesson15': 'الف بعد تنوین',
            'lesson16': 'یاء ناخوانا',
            'lesson17': 'حروف کوچک',
            'lesson18': 'مد',
            'lesson19': 'وقف',
            'lesson20': 'حروف مقطعه',
            'lesson21': 'التقاء ساکنین',
            'syllables': 'بخش خوانی',
            'tajweed': 'خلاصه تجوید'
        };

        // تنظیمات
        // اگر این مقدار true باشد، کاربر باید تا ساعت 8 صبح روز بعد صبر کند.
        // فعلاً برای تست شما false است.
        const ENABLE_TIME_LOCK = false; 

        let currentIndex = -1; // -1 یعنی صفحه خوش‌آمدگویی
        let unlockedIndex = 0; // تا درس اول باز است

        // لود شدن صفحه
        window.addEventListener('DOMContentLoaded', () => {
            loadProgress();
            renderSidebar();
            updateUI();
            
            // مدیریت چک‌باکس مودال
            document.getElementById('taskCheck').addEventListener('change', function() {
                const btn = document.getElementById('btnConfirmTask');
                if(this.checked) {
                    btn.disabled = false;
                    btn.style.opacity = '1';
                    btn.style.cursor = 'pointer';
                } else {
                    btn.disabled = true;
                    btn.style.opacity = '0.5';
                    btn.style.cursor = 'not-allowed';
                }
            });
        });

        // شروع دوره
        function startCourse() {
            goToLesson(0);
        }

        // بارگذاری پیشرفت از حافظه مرورگر
        function loadProgress() {
            const savedUnlock = localStorage.getItem('quran_unlockedIndex');
            const savedCurrent = localStorage.getItem('quran_currentIndex');
            
            if (savedUnlock !== null) unlockedIndex = parseInt(savedUnlock);
            if (savedCurrent !== null && savedCurrent !== '-1') {
                currentIndex = parseInt(savedCurrent);
                document.getElementById('welcome-screen').classList.remove('active');
                document.getElementById(lessons[currentIndex]).classList.add('active');
            }
        }

        // ذخیره پیشرفت
        function saveProgress() {
            localStorage.setItem('quran_unlockedIndex', unlockedIndex);
            localStorage.setItem('quran_currentIndex', currentIndex);
        }

        // ساخت سایدبار
        function renderSidebar() {
            const list = document.getElementById('lessonList');
            list.innerHTML = '';
            
            lessons.forEach((id, index) => {
                const li = document.createElement('li');
                li.className = 'lesson-item';
                
                const isLocked = index > unlockedIndex;
                const isActive = index === currentIndex;
                const isCompleted = index < unlockedIndex;

                let iconClass = 'fa-lock';
                if (isCompleted) iconClass = 'fa-check-circle';
                else if (!isLocked) iconClass = 'fa-lock-open';

                li.innerHTML = `
                    <button class="lesson-btn ${isActive ? 'active' : ''} ${isLocked ? 'locked' : ''}" 
                            onclick="goToLesson(${index})" ${isLocked ? 'disabled' : ''}>
                        <span>درس ${index + 1}: ${lessonTitles[id]}</span>
                        <i class="fas ${iconClass} status-icon"></i>
                    </button>
                `;
                list.appendChild(li);
            });

            document.getElementById('totalSteps').innerText = lessons.length;
        }

        // رفتن به یک درس خاص
        function goToLesson(index) {
            if (index > unlockedIndex) return;

            // مخفی کردن همه
            document.querySelectorAll('.course-container').forEach(el => el.classList.remove('active'));
            document.getElementById('welcome-screen').classList.remove('active');
            
            // نمایش درس جاری
            currentIndex = index;
            document.getElementById(lessons[currentIndex]).classList.add('active');
            
            // اسکرول به بالا
            document.getElementById('mainContent').scrollTop = 0;

            // بستن سایدبار در موبایل
            if (window.innerWidth < 992) {
                document.getElementById('sidebar').classList.remove('open');
                document.querySelector('.sidebar-overlay').classList.remove('active');
            }

            saveProgress();
            updateUI();
        }

        // آپدیت وضعیت دکمه‌ها و پروگرس بار
        function updateUI() {
            renderSidebar(); // آپدیت استایل سایدبار

            // دکمه‌ها
            const btnPrev = document.getElementById('btnPrev');
            const btnNext = document.getElementById('btnNext');
            
            btnPrev.disabled = currentIndex <= 0;
            
            if (currentIndex === -1) {
                // در صفحه خوش آمدگویی دکمه‌های پایین غیرفعال باشند بهتر است یا مخفی
                document.querySelector('.control-footer').style.display = 'none';
            } else {
                document.querySelector('.control-footer').style.display = 'flex';
                document.getElementById('currentStepNum').innerText = currentIndex + 1;
                
                // تغییر متن دکمه بعدی اگر درس آخر باشد
                if (currentIndex === lessons.length - 1) {
                    btnNext.innerHTML = 'پایان دوره <i class="fas fa-flag-checkered"></i>';
                } else if (currentIndex < unlockedIndex) {
                    btnNext.innerHTML = 'درس بعدی <i class="fas fa-chevron-left"></i>';
                } else {
                    btnNext.innerHTML = 'تکمیل و ادامه <i class="fas fa-check"></i>';
                }
            }

            // پروگرس بار
            if (currentIndex !== -1) {
                const percent = ((unlockedIndex) / lessons.length) * 100;
                document.getElementById('progressBar').style.width = percent + '%';
            }
        }

        // دکمه قبلی
        function prevLesson() {
            if (currentIndex > 0) goToLesson(currentIndex - 1);
        }

        // تلاش برای تکمیل درس (باز کردن مودال)
        function attemptComplete() {
            // اگر قبلاً این مرحله را رد کرده، مستقیم برو بعدی
            if (currentIndex < unlockedIndex) {
                goToLesson(currentIndex + 1);
                return;
            }

            // بررسی قفل زمانی (اگر فعال باشد)
            if (ENABLE_TIME_LOCK) {
                const lastCompletion = localStorage.getItem('quran_last_completion_time');
                if (lastCompletion) {
                    const now = new Date();
                    const lastDate = new Date(parseInt(lastCompletion));
                    
                    // محاسبه 8 صبح فردا
                    const nextDay8AM = new Date(lastDate);
                    nextDay8AM.setDate(nextDay8AM.getDate() + 1);
                    nextDay8AM.setHours(8, 0, 0, 0);

                    if (now < nextDay8AM) {
                        alert("طبق برنامه آموزشی، درس بعدی فردا ساعت ۸ صبح باز می‌شود. لطفاً تمرینات امروز را مرور کنید.");
                        return;
                    }
                }
            }

            // خواندن تکلیف از خاصیت data-task
            const currentLessonEl = document.getElementById(lessons[currentIndex]);
            const taskText = currentLessonEl.getAttribute('data-task');
            
            document.getElementById('taskText').innerText = taskText || "تکلیف خاصی برای این درس ثبت نشده است. لطفاً متن درس را مرور کنید.";
            
            // ریست کردن مودال
            document.getElementById('taskCheck').checked = false;
            const btn = document.getElementById('btnConfirmTask');
            btn.disabled = true;
            btn.style.opacity = '0.5';
            btn.style.cursor = 'not-allowed';

            // نمایش مودال
            document.getElementById('taskModal').classList.add('active');
        }

        // تایید نهایی تکلیف
        function confirmTask() {
            // بستن مودال
            document.getElementById('taskModal').classList.remove('active');

            // ذخیره زمان تکمیل (برای قفل زمانی درس بعد)
            localStorage.setItem('quran_last_completion_time', Date.now());

            // آنلاک کردن درس بعدی
            if (currentIndex === unlockedIndex && unlockedIndex < lessons.length - 1) {
                unlockedIndex++;
                // پخش صدای موفقیت (اختیاری)
                // const audio = new Audio('success.mp3'); audio.play();
            }

            if (currentIndex < lessons.length - 1) {
                goToLesson(currentIndex + 1);
            } else {
                alert("تبریک! شما کل دوره را به پایان رساندید.");
                saveProgress();
                updateUI();
            }
        }

        // مدیریت سایدبار موبایل
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.querySelector('.sidebar-overlay');
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        }

    </script>
</body>
</html>
