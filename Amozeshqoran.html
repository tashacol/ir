 
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دوره جامع آموزش قرآن کریم | خط عثمان طه</title>
    
    <!-- فونت‌های گوگل -->
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
    <!-- آیکون‌ها -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary-color: #0f5132; /* سبز قرآنی */
            --primary-light: #157347;
            --accent-color: #d4a017; /* طلایی */
            --bg-color: #f3f4f6;
            --text-color: #333;
            --sidebar-width: 300px;
            --locked-color: #9ca3af;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            outline: none;
        }

        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            height: 100vh;
            overflow: hidden; /* جلوگیری از اسکرول کلی صفحه */
        }

        /* --- استایل سایدبار (منوی دوره) --- */
        .sidebar {
            width: var(--sidebar-width);
            background-color: white;
            height: 100%;
            display: flex;
            flex-direction: column;
            border-left: 1px solid #e5e7eb;
            box-shadow: -2px 0 10px rgba(0,0,0,0.05);
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            text-align: center;
        }

        .sidebar-header h2 {
            font-size: 1.3rem;
            margin-bottom: 5px;
            font-weight: 800;
        }

        .sidebar-header p {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .progress-container {
            padding: 15px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #eee;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            margin-bottom: 5px;
            color: #666;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--accent-color);
            width: 0%;
            transition: width 0.5s ease;
        }

        .nav-links {
            list-style: none;
            overflow-y: auto;
            flex-grow: 1;
            padding: 10px 0;
        }

        .nav-links li {
            border-bottom: 1px solid #f3f4f6;
        }

        .nav-links li button {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 15px 20px;
            background: none;
            border: none;
            text-align: right;
            font-family: inherit;
            cursor: pointer;
            transition: 0.2s;
            color: var(--text-color);
        }

        .nav-links li button:hover {
            background-color: #f8f9fa;
        }

        .nav-links li button.active {
            background-color: #e6fffa;
            color: var(--primary-color);
            border-right: 4px solid var(--primary-color);
            font-weight: bold;
        }

        .nav-links li button.locked {
            color: var(--locked-color);
            cursor: not-allowed;
            background-color: #fafafa;
        }

        .status-icon {
            font-size: 0.9rem;
        }

        .fa-lock { color: var(--locked-color); }
        .fa-check-circle { color: var(--primary-color); }
        .fa-clock { color: var(--accent-color); }

        /* --- محتوای اصلی --- */
        .main-content {
            flex-grow: 1;
            height: 100%;
            overflow-y: auto;
            position: relative;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%230f5132' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .top-bar-mobile {
            display: none;
            background: white;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 900;
        }

        .lesson-container {
            max-width: 800px;
            margin: 40px auto;
            padding: 0 20px 100px 20px; /* فضای خالی پایین برای راحتی اسکرول */
        }

        /* استایل درس‌ها */
        section {
            display: none; /* پیش‌فرض مخفی */
            background: white;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            border-top: 5px solid var(--primary-color);
            animation: fadeIn 0.5s ease;
        }

        section.active-lesson {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1.lesson-title {
            font-size: 1.6rem;
            color: var(--primary-color);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        p {
            line-height: 1.9;
            margin-bottom: 15px;
            font-size: 1.1rem;
            text-align: justify;
        }

        /* استایل متن‌های قرآنی */
        .quran-text {
            font-family: 'Scheherazade New', serif;
            font-size: 2.2rem;
            color: #000;
            background-color: #fff9db; /* رنگ گرم‌تر */
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin: 25px 0;
            border: 2px solid #f1e3a6;
            line-height: 2.4;
            direction: rtl;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.02);
        }

        .highlight {
            color: #d63384;
            font-weight: bold;
        }

        /* استایل حروف الفبا */
        .alphabet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 12px;
            margin-top: 25px;
        }

        .letter-box {
            background: #fff;
            border: 1px solid #dee2e6;
            padding: 15px 5px;
            text-align: center;
            border-radius: 10px;
            font-family: 'Scheherazade New', serif;
            font-size: 1.6rem;
            transition: 0.3s;
            cursor: default;
        }

        .letter-box:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(15, 81, 50, 0.2);
            border-color: var(--primary-color);
        }

        /* بخش‌خوانی */
        .syllable-box {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        
        .syllable {
            background: #e9ecef;
            padding: 8px 15px;
            border-radius: 8px;
            font-family: 'Scheherazade New', serif;
            font-size: 1.6rem;
            color: #495057;
        }

        /* --- باکس تکلیف و دکمه ادامه --- */
        .assignment-box {
            background-color: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 12px;
            padding: 25px;
            margin-top: 40px;
        }

        .assignment-title {
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .assignment-content {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px dashed #ced4da;
            margin-bottom: 20px;
            font-size: 0.95rem;
            color: #555;
        }

        .action-area {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .confirm-check {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            user-select: none;
        }

        .confirm-check input {
            width: 20px;
            height: 20px;
            accent-color: var(--primary-color);
            cursor: pointer;
        }

        .btn-complete {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 40px;
            font-size: 1rem;
            border-radius: 50px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            transition: all 0.3s;
            opacity: 0.6;
            pointer-events: none; /* غیرفعال تا زمان تیک زدن */
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn-complete.active-btn {
            opacity: 1;
            pointer-events: all;
        }

        .btn-complete:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        /* پیام قفل زمان */
        .timer-lock-message {
            text-align: center;
            padding: 40px;
            background: white;
            border-radius: 15px;
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .timer-lock-message i {
            font-size: 3rem;
            color: var(--accent-color);
        }

        /* رسپانسیو */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                right: -100%; /* مخفی در موبایل */
                width: 85%;
                transition: right 0.3s ease;
            }

            .sidebar.open {
                right: 0;
                box-shadow: 0 0 1000px rgba(0,0,0,0.5); /* تاریک کردن پس زمینه */
            }

            .main-content {
                width: 100%;
            }

            .top-bar-mobile {
                display: flex;
            }

            .lesson-container {
                margin: 20px auto;
                padding: 10px 15px 80px 15px;
            }

            section {
                padding: 25px 20px;
            }

            h1.lesson-title {
                font-size: 1.3rem;
            }

            .quran-text {
                font-size: 1.8rem;
                padding: 15px;
            }

            .alphabet-grid {
                grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            }
        }
    </style>
</head>
<body>

    <!-- نوار بالا مخصوص موبایل -->
    <div class="top-bar-mobile">
        <h3 style="color: var(--primary-color); margin: 0; font-size: 1.1rem;">آموزش قرآن کریم</h3>
        <button id="menuToggle" style="background:none; border:none; font-size:1.5rem; color:var(--text-color); cursor:pointer;">
            <i class="fas fa-bars"></i>
        </button>
    </div>

    <!-- سایدبار -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h2>دوره آموزشی قرآن</h2>
                <!-- دکمه بستن منو در موبایل -->
                <button id="closeMenu" style="background:none; border:none; color:white; font-size:1.2rem; display:none;" onclick="toggleMenu()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <p>آموزش گام به گام و زمان‌بندی شده</p>
        </div>
        
        <div class="progress-container">
            <div class="progress-label">
                <span>پیشرفت دوره</span>
                <span id="progressText">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
        </div>

        <ul class="nav-links" id="lessonList">
            <!-- لیست درس‌ها توسط جاوااسکریپت پر می‌شود -->
        </ul>
    </aside>

    <!-- محتوای اصلی -->
    <div class="main-content">
        <div class="lesson-container">
            
            <!-- صفحه خوش‌آمدگویی (اگر هیچ درسی انتخاب نشده باشد یا درس اول) -->
            <div id="welcomeScreen" style="text-align: center; margin-bottom: 40px; display:none;">
                <h1 style="color:var(--primary-color); margin-bottom:10px;">بسم الله الرحمن الرحیم</h1>
                <p>به دوره جامع آموزش قرآن خوش آمدید. <br>درس‌ها را به ترتیب انجام دهید.</p>
            </div>

            <!-- پیام قفل بودن -->
            <div id="timerLockMessage" class="timer-lock-message">
                <i class="fas fa-hourglass-half"></i>
                <h3>این درس هنوز قفل است!</h3>
                <p>برای یادگیری عمیق، درس‌ها به صورت روزانه باز می‌شوند.</p>
                <div style="background:#fff3cd; color:#856404; padding:10px; border-radius:5px; border:1px solid #ffeeba;">
                    زمان باز شدن: <span id="unlockTimeDisplay" style="font-weight:bold; direction:ltr;"></span>
                </div>
            </div>

            <!-- درس اول -->
            <section id="lesson1" data-id="1" data-task="حروف را ۵ بار از روی الگو با صدای بلند بخوانید و تکرار کنید.">
                <h1 class="lesson-title"><span class="badge">۱</span> درس اول: حروف الفبا</h1>
                <p>حروف عربی مانند حروف فارسی هستند اما ۴ حرف (پ، ژ، گ، چ) در زبان عربی وجود ندارد.</p>
                <div class="alphabet-grid">
                    <div class="letter-box">ء</div><div class="letter-box">ا</div><div class="letter-box">ب</div>
                    <div class="letter-box">ت</div><div class="letter-box">ث</div><div class="letter-box">ج</div>
                    <div class="letter-box">ح</div><div class="letter-box">خ</div><div class="letter-box">د</div>
                    <div class="letter-box">ذ</div><div class="letter-box">ر</div><div class="letter-box">ز</div>
                    <div class="letter-box">س</div><div class="letter-box">ش</div><div class="letter-box">ص</div>
                    <div class="letter-box">ض</div><div class="letter-box">ط</div><div class="letter-box">ظ</div>
                    <div class="letter-box">ع</div><div class="letter-box">غ</div><div class="letter-box">ف</div>
                    <div class="letter-box">ق</div><div class="letter-box">ک</div><div class="letter-box">ل</div>
                    <div class="letter-box">م</div><div class="letter-box">ن</div><div class="letter-box">و</div>
                    <div class="letter-box">ه</div><div class="letter-box">ی</div>
                </div>
            </section>

            <!-- درس دوم -->
            <section id="lesson2" data-id="2" data-task="سه کلمه از قرآن پیدا کنید که دارای فتحه، کسره و ضمه باشند.">
                <h1 class="lesson-title"><span class="badge">۲</span> درس دوم: حرکات کوتاه</h1>
                <p>برای اینکه بتوانیم حروف را بخوانیم از علامات زیر استفاده می‌کنیم:</p>
                <div class="quran-text">
                    ــَـ (فتحه) &nbsp;&nbsp;&nbsp; ــِـ (کسره) &nbsp;&nbsp;&nbsp; ــُـ (ضمه)
                </div>
                <p>مثال:</p>
                <ul>
                    <li>ــَـ مثل فَ در فَرش</li>
                    <li>ــِـ مثل خِ در خِرس</li>
                    <li>ــُـ مثل تُ در تُرش</li>
                </ul>
            </section>

            <!-- درس سوم -->
            <section id="lesson3" data-id="3" data-task="صدای حرکات کوتاه عربی را ضبط کنید و با تلفظ فارسی مقایسه کنید.">
                <h1 class="lesson-title"><span class="badge">۳</span> درس سوم: تفاوت صداها</h1>
                <p>در زبان عربی صدای حرکات مقداری با فارسی فرق دارد:</p>
                <ul>
                    <li>ــَـ صدایی شبیه به <span class="highlight">آ</span> دارد (اما کوتاه)</li>
                    <li>ــِـ صدایی شبیه به <span class="highlight">ای</span> دارد (اما کوتاه)</li>
                    <li>ــُـ صدایی شبیه به <span class="highlight">او</span> دارد (اما کوتاه)</li>
                </ul>
            </section>

            <!-- درس چهارم -->
            <section id="lesson4" data-id="4" data-task="پنج مورد از هر کدام از حرکات کشیده در سوره حمد پیدا کنید.">
                <h1 class="lesson-title"><span class="badge">۴</span> درس چهارم: حرکات کشیده</h1>
                <p>اگر بعد از حرکات کوتاه، حروف مدی (الف، ی، و) بیایند، صدا کشیده می‌شود.</p>
                
                <h3>۱. فتحه کشیده (ــَـ + ا):</h3>
                <div class="quran-text">
                    قَالَ - كَانَ - جَاءَ - مَالِكِ - النَّاسُ - إِيَّاكَ
                </div>

                <h3>۲. کسره کشیده (ــِـ + ي):</h3>
                <div class="quran-text">
                    فِيهِ - الَّذِي - الرَّحِيمِ - دِينِ - قِيلَ
                </div>

                <h3>۳. ضمه کشیده (ــُـ + و):</h3>
                <div class="quran-text">
                    يَقُولُ - كَانُوا - ءَامَنُوا - قُلُوبُهُم - يَعْلَمُونَ
                </div>
            </section>

            <!-- درس پنجم -->
            <section id="lesson5" data-id="5" data-task="ده کلمه ساکن دار از جزء ۳۰ قرآن استخراج کنید.">
                <h1 class="lesson-title"><span class="badge">۵</span> درس پنجم: سکون</h1>
                <p>به حرفی که هیچ حرکتی ندارد ساکن میگویند. حرف ساکن با علامت ( ۡ ) نشان داده می‌شود و به کمک حرف متحرک قبل از خود خوانده میشود.</p>
                <div class="quran-text">
                    قَدْ - لَمْ - الْحَمْدُ - أَنْعَمْتَ - مُلۡکُ
                </div>
            </section>

            <!-- درس ششم -->
            <section id="lesson6" data-id="6" data-task="سوره توحید را بخوانید و انواع تنوین را در آن مشخص کنید.">
                <h1 class="lesson-title"><span class="badge">۶</span> درس ششم: تنوین</h1>
                <p>تنوین، نون ساکنی است که نوشته نمی‌شود اما خوانده می‌شود.</p>
                
                <h3>تنوین فتحه (ــًـ):</h3>
                <div class="quran-text">كِتَابًا - رَسُولًا - عَلِيمًا - هُدًى</div>

                <h3>تنوین کسره (ـــٍـ):</h3>
                <div class="quran-text">كِتَابٍ - رَسُولٍ - يَوْمٍ - عَذَابٍ</div>

                <h3>تنوین ضمه (ــٌـ):</h3>
                <div class="quran-text">كِتَابٌ - رَسُولٌ - عَذَابٌ - عَلِيمٌ</div>
            </section>

            <!-- درس هفتم -->
            <section id="lesson7" data-id="7" data-task="کلمات تشدید دار سوره ناس را پیدا کرده و با تاکید بخوانید.">
                <h1 class="lesson-title"><span class="badge">۷</span> درس هفتم: تشدید</h1>
                <p>علامت ( ّ ) نشان‌دهنده تکرار حرف است. حرف اول ساکن و دومی متحرک است.</p>
                <div class="quran-text">
                    رَبِّ - الْحَقُّ - الشَّمْسُ - النَّاسُ - إِنَّ - ثُمَّ
                </div>
            </section>

            <!-- درس هشتم -->
            <section id="lesson8" data-id="8" data-task="صفحه ۱۰ قرآن را باز کنید و ۵ کلمه که همزه روی پایه دارند بیابید.">
                <h1 class="lesson-title"><span class="badge">۸</span> درس هشتم: پایه همزه</h1>
                <p>اگر همزه ( ء ) زیر یا روی حرفی باشد، آن حرف را نمی‌خوانیم و فقط همزه را میخوانیم.</p>
                <div class="quran-text">
                    يُؤْمِنُونَ - سَأَلَ - قُرِئَ - جِئْتَ - بِئْسَ
                </div>
            </section>

            <!-- درس نهم -->
            <section id="lesson9" data-id="9" data-task="کلمات دارای الف کوتاه در سوره اعلی را تمرین کنید.">
                <h1 class="lesson-title"><span class="badge">۹</span> درس نهم: الف کوتاه</h1>
                <p>اگر الف کوتاه ( ٰ ) روی حرفی بود، آن حرف را نمی‌خوانیم و فقط الف را میخوانیم.</p>
                <div class="quran-text">
                    إِذۡ قَالَ مُوسَىٰ - الزَّكَوٰةِ - عِيسَىٰ - صَلَوٰةِ
                </div>
            </section>

            <!-- درس دهم -->
            <section id="lesson10" data-id="10" data-task="در سوره کافرون، حروف ناخوانا را پیدا کنید.">
                <h1 class="lesson-title"><span class="badge">۱۰</span> درس دهم: حروف ناخوانا (۱)</h1>
                <p>اگر علامت ( ْ ) دایره توخالی روی حرفی واقع شود، آن حرف خوانده نمی‌شود.</p>
                <div class="quran-text">
                    ءَامَنُواْ - كَفَرُواْ - وَقُومُواْ - حَافِظُواْ
                </div>
            </section>

            <!-- درس یازدهم -->
            <section id="lesson11" data-id="11" data-task="کلمه 'انا' را در قرآن جستجو کنید و نحوه خواندن آن را تمرین کنید.">
                <h1 class="lesson-title"><span class="badge">۱۱</span> درس یازدهم: الف مدی (انا)</h1>
                <p>اگر علامت ( 0 ) بیضی شکل روی الف باشد (معمولا در کلمه اَنَا)، هنگام وصل خوانده نمی‌شود.</p>
                <div class="quran-text">
                    قَالَ أَنَا۠ خَيْرٌ مِنْهُ - لَٰكِنَّـا۠
                </div>
            </section>

            <!-- درس دوازدهم -->
            <section id="lesson12" data-id="12" data-task="۱۰ عبارت که در وسط آنها همزه وصل وجود دارد را بخوانید.">
                <h1 class="lesson-title"><span class="badge">۱۲</span> درس دوازدهم: همزه وصل (ٱ)</h1>
                <p>اگر الف به صورت ( ٱ ) نوشته شود، در میان کلام خوانده نمی‌شود (ساقط می‌شود).</p>
                <div class="quran-text">
                    وَٱلۡقَمَرِ - يَوْمِ ٱلدِّينِ - هُوَ ٱللَّهُ - بِسْمِ ٱللَّهِ
                </div>
            </section>

            <!-- درس سیزدهم -->
            <section id="lesson13" data-id="13" data-task="شروع با همزه وصل را در ۵ آیه اول سوره فجر تمرین کنید.">
                <h1 class="lesson-title"><span class="badge">۱۳</span> درس سیزدهم: شروع با همزه وصل</h1>
                <p>هنگام شروع از ( ٱ ) باید به الف حرکت دهیم:</p>
                <ol>
                    <li>اگر کلمه "ال" دارد: <strong>فتحه</strong> (ٱلْحَمْدُ -> اَلْحَمْدُ)</li>
                    <li>در فعل‌ها، اگر حرف سوم ضمه داشت: <strong>ضمه</strong> (ٱدْعُ -> اُدْعُ)</li>
                    <li>در سایر موارد: <strong>کسره</strong> (ٱهْدِنَا -> اِهْدِنَا، اِبْن، اِسْم)</li>
                </ol>
            </section>

            <!-- درس چهاردهم -->
            <section id="lesson14" data-id="14" data-task="قانون ادغام حروف یرملون را در سوره زلزال بررسی کنید.">
                <h1 class="lesson-title"><span class="badge">۱۴</span> درس چهاردهم: حروف بدون علامت</h1>
                <p>اگر حرفی در قرآن بدون هیچ علامتی بود، معمولاً خوانده نمی‌شود (ادغام) یا تغییر در تلفظ دارد.</p>
                
                <h3>۱. حرف بعدی تشدید دارد:</h3>
                <p>حرف بدون علامت خوانده نمی‌شود.</p>
                <div class="quran-text">قُل رَّبِّ (قُرَّبِّ) - قَد تَّعْلَمُونَ</div>

                <h3>۲. حرف نون (ن) بدون علامت:</h3>
                <p>اگر بعدش (ی، ر، م، ل، و، ن) باشد: ادغام می‌شود (ن خوانده نمی‌شود).</p>
                <div class="quran-text">مِن رَّبِّهِمْ - مَن يَقُولُ</div>
                <p>اگر بالای نون "م" کوچک باشد: تبدیل به میم می‌شود (اقلاب).</p>
                <div class="quran-text">مِنۢ بَعْدِ - يَنۢبَغِي</div>
            </section>

            <!-- درس پانزدهم -->
            <section id="lesson15" data-id="15" data-task="آیات پایانی سوره نبأ را با توجه به این قاعده تمرین کنید.">
                <h1 class="lesson-title"><span class="badge">۱۵</span> درس پانزدهم: الفِ بعد از تنوین</h1>
                <p>الفی که بعد از تنوین ــًـ می‌آید، در حالت وصل خوانده نمی‌شود. در وقف تبدیل به الف مدی می‌شود.</p>
                <div class="quran-text">
                    نَعِيمًا - شَرَابًا طَهُورًا - مُسۡتَقَرًّا
                </div>
            </section>

            <!-- درس شانزدهم -->
            <section id="lesson16" data-id="16" data-task="سوره شمس را بخوانید و به یاء های ناخوانا توجه کنید.">
                <h1 class="lesson-title"><span class="badge">۱۶</span> درس شانزدهم: یاء ناخوانا</h1>
                <p>یائی (ی) که در آخر کلمه پس از تنوین واقع می‌شود خوانده نمی‌شود.</p>
                <div class="quran-text">
                    هُدًى - فَتًى - ضُحًى - عَمًى
                </div>
            </section>

            <!-- درس هفدهم -->
            <section id="lesson17" data-id="17" data-task="در سوره بقره، ۵ مورد از حروف کوچک را بیابید.">
                <h1 class="lesson-title"><span class="badge">۱۷</span> درس هفدهم: حروف کوچک</h1>
                <p>حروف کوچکی که در کلمات می‌بینید باید تلفظ شوند.</p>
                <div class="quran-text">
                    نُـــۨجِي - لَهُۥ - أَمۡرِهِۦ - هَـٰذَا
                </div>
            </section>

            <!-- درس هجدهم -->
            <section id="lesson18" data-id="18" data-task="مد واجب و مد لازم را در سوره قدر و تین پیدا کنید.">
                <h1 class="lesson-title"><span class="badge">۱۸</span> درس هجدهم: مد ( ٓ )</h1>
                <p>علامت مد یعنی کشش صدا بیش از حد طبیعی.</p>
                <ul>
                    <li>اگر بعدش همزه (ء) باشد: ۴ شماره کشش (سُوٓءَ)</li>
                    <li>اگر بعدش سکون یا تشدید باشد: ۶ شماره کشش (ضَّآلِّينَ)</li>
                </ul>
            </section>

            <!-- درس نوزدهم -->
            <section id="lesson19" data-id="19" data-task="قواعد وقف را بر روی آیات سوره تکاثر اجرا کنید.">
                <h1 class="lesson-title"><span class="badge">۱۹</span> درس نوزدهم: وقف</h1>
                <p>هنگام توقف بر آخر کلمات:</p>
                <ul>
                    <li>اگر آخر کلمه (ة) باشد -> تبدیل به (ه) ساکن می‌شود. (صَلَوٰةِ -> صَلَوٰه)</li>
                    <li>اگر تنوین (ً) باشد -> تبدیل به الف می‌شود. (حِسَابًا -> حِسَابَا)</li>
                    <li>سایر حرکات -> ساکن می‌شوند. (رَحِيمٌ -> رَحِيمْ)</li>
                </ul>
            </section>

            <!-- درس بیستم -->
            <section id="lesson20" data-id="20" data-task="پنج سوره که با حروف مقطعه شروع می‌شوند را نام ببرید و بخوانید.">
                <h1 class="lesson-title"><span class="badge">۲۰</span> درس بیستم: حروف مقطعه</h1>
                <p>حروفی که در اول سوره‌ها می‌آیند و باید با نامشان خوانده شوند.</p>
                <div class="quran-text">
                    الٓـمٓ (الف لام میم) - يسٓ (یا سین) - قٓ (قاف)
                </div>
            </section>

            <!-- درس بیست و یکم -->
            <section id="lesson21" data-id="21" data-task="آیه 'قل هو الله احد' را با قاعده التقاء ساکنین به آیه بعدی وصل کنید.">
                <h1 class="lesson-title"><span class="badge">۲۱</span> درس بیست و یکم: التقاء ساکنین</h1>
                <p>اگر تنوین به حرف ساکن یا مشدد برسد، نونِ تنوین تبدیل به نون مکسور (نِ) می‌شود.</p>
                <div class="quran-text">
                    قُلْ هُوَ اللَّهُ أَحَدٌ ٱللَّهُ الصَّمَدُ <br>
                    خوانده می‌شود: أَحَدُنِ ٱللَّهُ الصَّمَدُ
                </div>
            </section>

            <!-- بخش خوانی -->
            <section id="syllables" data-id="22" data-task="سه کلمه دشوار از قرآن انتخاب کرده و آنها را بخش‌بخش کنید.">
                <h1 class="lesson-title"><span class="badge">۲۲</span> درس آخر: بخش خوانی (مهم)</h1>
                <p>برای خواندن کلمات سخت، آن‌ها را بخش‌بخش کنید. هر بخش با یک حرف متحرک شروع می‌شود.</p>
                
                <h3>مثال‌ها:</h3>
                
                <div class="quran-text">يَعْلَمُونَ</div>
                <div class="syllable-box">
                    <span class="syllable">یَعْ</span>
                    <span class="syllable">لَ</span>
                    <span class="syllable">مُو</span>
                    <span class="syllable">نَ</span>
                </div>

                <div class="quran-text">ٱلْمُسْتَقِيمَ</div>
                <div class="syllable-box">
                    <span class="syllable">أَلْ</span>
                    <span class="syllable">مُسْ</span>
                    <span class="syllable">تَ</span>
                    <span class="syllable">قِي</span>
                    <span class="syllable">مَ</span>
                </div>

                <div class="quran-text">فَسَيَكْفِيكَهُمُ</div>
                <div class="syllable-box">
                    <span class="syllable">فَ</span>
                    <span class="syllable">سَ</span>
                    <span class="syllable">يَكْ</span>
                    <span class="syllable">فِي</span>
                    <span class="syllable">كَ</span>
                    <span class="syllable">هُ</span>
                    <span class="syllable">مُ</span>
                </div>
            </section>

            <!-- تجوید -->
            <section id="tajweed" data-id="23" data-task="تبریک! شما دوره را تمام کردید. یک صفحه از قرآن را با تمام قواعد آموخته شده بخوانید.">
                <h1 class="lesson-title"><span class="badge">۲۳</span> خلاصه تجوید</h1>
                
                <h3>احکام نون ساکن:</h3>
                <ul>
                    <li><strong>اظهار:</strong> نون کاملاً واضح خوانده می‌شود (نزد حروف حلقی: ء ه ع ح غ خ).</li>
                    <li><strong>ادغام:</strong> نون حذف و در حرف بعد ادغام می‌شود (یرملون).</li>
                    <li><strong>اقلاب:</strong> نون به میم تبدیل می‌شود (نزد حرف ب).</li>
                    <li><strong>اخفاء:</strong> نون با حالت تودماغی ادا می‌شود (سایر حروف).</li>
                </ul>

                <h3>قلقله:</h3>
                <p>رها کردن صدای حرف ساکن. حروف قلقله: (ق ط ب ج د).</p>
                
                <h3>حروف استعلاء (درشت):</h3>
                <p>ص ض ط ظ خ غ ق (باید دهان را پر کرد و درشت تلفظ کرد).</p>
            </section>

        </div>
    </div>

    <script>
        // ============================================
        // 1. DATA AND STATE MANAGEMENT
        // ============================================
        
        // لیست تمام سکشن ها به ترتیب
        const lessonIds = [
            'lesson1', 'lesson2', 'lesson3', 'lesson4', 'lesson5', 
            'lesson6', 'lesson7', 'lesson8', 'lesson9', 'lesson10',
            'lesson11', 'lesson12', 'lesson13', 'lesson14', 'lesson15',
            'lesson16', 'lesson17', 'lesson18', 'lesson19', 'lesson20',
            'lesson21', 'syllables', 'tajweed'
        ];

        // اسامی فارسی درس‌ها برای نمایش در منو
        const lessonNames = [
            "حروف الفبا", "حرکات کوتاه", "تفاوت صداها", "حرکات کشیده", "سکون",
            "تنوین", "تشدید", "پایه همزه", "الف کوتاه", "حروف ناخوانا (۱)",
            "الف مدی (انا)", "همزه وصل (ٱ)", "شروع با همزه وصل", "حروف بدون علامت", "الف بعد تنوین",
            "یاء ناخوانا", "حروف کوچک", "مد ( ٓ )", "وقف", "حروف مقطعه",
            "التقاء ساکنین", "بخش خوانی", "خلاصه تجوید"
        ];

        // وضعیت دوره (پیش‌فرض)
        let courseState = {
            currentLessonIndex: 0, // ایندکس درسی که کاربر الان باید ببیند
            completedLessons: [], // لیست آیدی درس‌های تمام شده
            unlockTimes: {} // آبجکتی برای ذخیره زمان باز شدن: { 'lesson2': timestamp }
        };

        // ============================================
        // 2. INITIALIZATION & UI RENDER
        // ============================================

        function init() {
            loadProgress();
            injectTaskUI(); // اضافه کردن دینامیک باکس تکالیف به همه درس‌ها
            renderSidebar();
            checkLocksAndRender();
        }

        // خواندن از حافظه مرورگر
        function loadProgress() {
            const saved = localStorage.getItem('quranCourseProgress');
            if (saved) {
                courseState = JSON.parse(saved);
            } else {
                // اگر بار اول است، درس اول باز است و بقیه قفل
                // درس اول زمان انتظار ندارد
                courseState.unlockTimes['lesson1'] = 0; 
            }
        }

        // ذخیره در حافظه
        function saveProgress() {
            localStorage.setItem('quranCourseProgress', JSON.stringify(courseState));
        }

        // تزریق HTML مربوط به تکالیف به انتهای هر سکشن
        function injectTaskUI() {
            document.querySelectorAll('section').forEach(section => {
                const taskId = section.id;
                const taskDesc = section.getAttribute('data-task');
                
                const taskHTML = `
                    <div class="assignment-box">
                        <div class="assignment-title">
                            <i class="fas fa-clipboard-list"></i> تکلیف پایان درس
                        </div>
                        <div class="assignment-content">
                            ${taskDesc}
                        </div>
                        <div class="action-area">
                            <label class="confirm-check">
                                <input type="checkbox" onchange="toggleCompleteBtn(this, '${taskId}')">
                                <span>تکلیف این درس را با دقت انجام دادم.</span>
                            </label>
                            <button class="btn-complete" id="btn-${taskId}" onclick="completeLesson('${taskId}')">
                                تکمیل درس و رفتن به مرحله بعد <i class="fas fa-chevron-left"></i>
                            </button>
                        </div>
                    </div>
                `;
                section.insertAdjacentHTML('beforeend', taskHTML);
            });
        }

        // ============================================
        // 3. LOGIC & NAVIGATION
        // ============================================

        // بررسی قفل‌ها و نمایش درس صحیح
        function checkLocksAndRender() {
            const now = Date.now();
            let activeId = lessonIds[courseState.currentLessonIndex];
            
            // پیدا کردن درسی که باید نمایش داده شود
            // کاربر می‌تواند درس‌های قبلی را ببیند، اما درس بعدی را اگر زمانش نرسیده باشد نه.
            
            renderLesson(activeId);
        }

        // نمایش یک درس خاص
        function renderLesson(id) {
            // مخفی کردن همه
            document.querySelectorAll('section').forEach(el => el.classList.remove('active-lesson'));
            document.getElementById('timerLockMessage').style.display = 'none';
            document.getElementById('welcomeScreen').style.display = 'none';

            const targetSection = document.getElementById(id);
            const index = lessonIds.indexOf(id);
            const unlockTime = courseState.unlockTimes[id] || 0;
            const now = Date.now();

            // بررسی آیا درس قفل زمانی دارد؟
            // شرط: درس باید در لیست unlocked باشد یا ایندکس آن کمتر/مساوی ایندکس فعلی باشد
            // اما مهمتر از همه زمان آن است.
            
            if (index > courseState.currentLessonIndex) {
                // این درس هنوز از نظر ترتیبی قفل است
                document.getElementById('timerLockMessage').style.display = 'flex';
                document.getElementById('timerLockMessage').querySelector('h3').innerText = "این درس هنوز قفل است";
                document.getElementById('unlockTimeDisplay').innerText = "باید درس‌های قبلی را تکمیل کنید.";
                return;
            }

            if (unlockTime > now) {
                // قفل زمانی فعال است
                document.getElementById('timerLockMessage').style.display = 'flex';
                document.getElementById('unlockTimeDisplay').innerText = new Date(unlockTime).toLocaleString('fa-IR');
                return;
            }

            // نمایش درس
            targetSection.classList.add('active-lesson');
            
            // اسکرول به بالا
            if(window.innerWidth < 768) {
                // در موبایل منو را ببند
                document.getElementById('sidebar').classList.remove('open');
                document.getElementById('closeMenu').style.display = 'none';
            }
            document.querySelector('.main-content').scrollTop = 0;
            
            updateSidebarActive(id);
        }

        // فعال کردن دکمه تکمیل
        window.toggleCompleteBtn = function(checkbox, id) {
            const btn = document.getElementById(`btn-${id}`);
            if (checkbox.checked) {
                btn.classList.add('active-btn');
            } else {
                btn.classList.remove('active-btn');
            }
        }

        // منطق تکمیل درس
        window.completeLesson = function(id) {
            const currentIndex = lessonIds.indexOf(id);
            
            // افزودن به لیست تکمیل شده‌ها
            if (!courseState.completedLessons.includes(id)) {
                courseState.completedLessons.push(id);
            }

            // محاسبه زمان باز شدن درس بعدی
            if (currentIndex < lessonIds.length - 1) {
                const nextLessonId = lessonIds[currentIndex + 1];
                
                // اگر قبلا زمان تعیین نشده باشد
                if (!courseState.unlockTimes[nextLessonId]) {
                    // منطق: 8 صبح روز بعد
                    const tomorrow = new Date();
                    tomorrow.setDate(tomorrow.getDate() + 1); // رفتن به فردا
                    tomorrow.setHours(8, 0, 0, 0); // تنظیم ساعت 8 صبح
                    
                    // برای تست برنامه نویس (جهت بررسی سریع): کد زیر را فعال کنید تا 10 ثانیه بعد باز شود
                    // const tomorrow = new Date();
                    // tomorrow.setSeconds(tomorrow.getSeconds() + 10);

                    courseState.unlockTimes[nextLessonId] = tomorrow.getTime();
                }

                // آپدیت ایندکس درس جاری کاربر به درس بعدی
                courseState.currentLessonIndex = currentIndex + 1;
            }

            saveProgress();
            renderSidebar();
            
            // رفتن به درس بعدی (که احتمالا قفل زمانی دارد)
            if (currentIndex < lessonIds.length - 1) {
                renderLesson(lessonIds[currentIndex + 1]);
                alert("درس تکمیل شد! درس بعدی ساعت ۸ صبح فردا در دسترس خواهد بود.");
            } else {
                alert("تبریک! شما تمام دروس دوره را با موفقیت به پایان رساندید.");
            }
        }

        // رندر کردن سایدبار (منو)
        function renderSidebar() {
            const list = document.getElementById('lessonList');
            list.innerHTML = '';
            
            const now = Date.now();
            let total = lessonIds.length;
            let completed = courseState.completedLessons.length;
            
            // آپدیت نوار پیشرفت
            const percent = Math.round((completed / total) * 100);
            document.getElementById('progressBar').style.width = `${percent}%`;
            document.getElementById('progressText').innerText = `${percent}%`;

            lessonIds.forEach((id, index) => {
                const li = document.createElement('li');
                const btn = document.createElement('button');
                
                const isCompleted = courseState.completedLessons.includes(id);
                const unlockTime = courseState.unlockTimes[id] || 9999999999999;
                const isTimeLocked = (unlockTime > now && index <= courseState.currentLessonIndex);
                const isSequenceLocked = index > courseState.currentLessonIndex;
                
                // درس اول همیشه باز است اگر ایندکس 0 باشد
                const isActuallyLocked = (index > 0 && isSequenceLocked) || isTimeLocked;

                let iconClass = 'fa-circle';
                if (isCompleted) iconClass = 'fa-check-circle';
                else if (isActuallyLocked && isTimeLocked) iconClass = 'fa-clock';
                else if (isActuallyLocked) iconClass = 'fa-lock';
                else iconClass = 'fa-play-circle'; // در دسترس

                let statusClass = '';
                if (isActuallyLocked) statusClass = 'locked';

                btn.className = statusClass;
                btn.innerHTML = `
                    <span>درس ${index + 1}: ${lessonNames[index]}</span>
                    <i class="fas ${iconClass} status-icon"></i>
                `;

                if (!isActuallyLocked || isCompleted) {
                    btn.onclick = () => renderLesson(id);
                } else if (isTimeLocked) {
                     btn.onclick = () => {
                         // نمایش پیام قفل زمانی حتی اگر روی منو کلیک کرد
                         renderLesson(id); 
                     };
                }

                li.appendChild(btn);
                list.appendChild(li);
            });
        }

        function updateSidebarActive(activeId) {
            const buttons = document.querySelectorAll('.nav-links button');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // پیدا کردن دکمه مربوطه با توجه به ایندکس
            const index = lessonIds.indexOf(activeId);
            if(buttons[index]) buttons[index].classList.add('active');
        }

        // ============================================
        // 4. MOBILE MENU HANDLERS
        // ============================================
        
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        const closeMenu = document.getElementById('closeMenu');

        menuToggle.addEventListener('click', toggleMenu);

        function toggleMenu() {
            sidebar.classList.toggle('open');
            if (sidebar.classList.contains('open')) {
                closeMenu.style.display = 'block';
            } else {
                closeMenu.style.display = 'none';
            }
        }

        // شروع برنامه
        init();

    </script>
</body>
</html> 
